{%- if card_product and card_product != empty -%}
  <product-card
    data-title="{{ card_product.title | escape }}"
    data-url="{{ card_product.url }}"
    data-available="{{ card_product.available }}"
    data-compare-at-price="{{ card_product.compare_at_price | money_without_currency }}"
    data-price="{{ card_product.price | money_without_currency  }}"
    data-currency-code="{{ shop.currency }}"
    data-badge-position="{{ settings.badge_position | handleize }}"
    data-section-id="{{ section_id }}"
    data-product-id="{{ card_product.id }}"
    data-srcset="
      {%- if card_product.featured_media.width >= 165 -%}{{ card_product.featured_media | image_url: width: 165 }} 165w,{%- endif -%}
      {%- if card_product.featured_media.width >= 360 -%}{{ card_product.featured_media | image_url: width: 360 }} 360w,{%- endif -%}
      {%- if card_product.featured_media.width >= 533 -%}{{ card_product.featured_media | image_url: width: 533 }} 533w,{%- endif -%}
      {%- if card_product.featured_media.width >= 720 -%}{{ card_product.featured_media | image_url: width: 720 }} 720w,{%- endif -%}
      {%- if card_product.featured_media.width >= 940 -%}{{ card_product.featured_media | image_url: width: 940 }} 940w,{%- endif -%}
      {%- if card_product.featured_media.width >= 1066 -%}{{ card_product.featured_media | image_url: width: 1066 }} 1066w,{%- endif -%}
      {{ card_product.featured_media | image_url }} {{ card_product.featured_media.width }}w
    "
    data-secondary-srcset="
      {%- if card_product.media[1].width >= 165 -%}{{ card_product.media[1] | image_url: width: 165 }} 165w,{%- endif -%}
      {%- if card_product.media[1].width >= 360 -%}{{ card_product.media[1] | image_url: width: 360 }} 360w,{%- endif -%}
      {%- if card_product.media[1].width >= 533 -%}{{ card_product.media[1] | image_url: width: 533 }} 533w,{%- endif -%}
      {%- if card_product.media[1].width >= 720 -%}{{ card_product.media[1] | image_url: width: 720 }} 720w,{%- endif -%}
      {%- if card_product.media[1].width >= 940 -%}{{ card_product.media[1] | image_url: width: 940 }} 940w,{%- endif -%}
      {%- if card_product.media[1].width >= 1066 -%}{{ card_product.media[1] | image_url: width: 1066 }} 1066w,{%- endif -%}
      {{ card_product.media[1] | image_url }} {{ card_product.media[1].width }}w
    "
    data-featured-media="
      src: {{ card_product.featured_media | image_url: width: 533 }},
      width: {{ card_product.featured_media.width }},
      height: {{ card_product.featured_media.height }},
      alt: {{ card_product.featured_media.alt | escape }},
      sizes: (min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)
    "
    {%- if card_product.media[1] != null -%}
      data-secondary-media="
        src: {{ card_product.media[1] | image_url: width: 533 }},
        width: {{ card_product.media[1].width }},
        height: {{ card_product.media[1].height }},
        srcset:
          {%- if card_product.media[1].width >= 165 -%}{{ card_product.media[1] | image_url: width: 165 }} 165w,{%- endif -%}
          {%- if card_product.media[1].width >= 360 -%}{{ card_product.media[1] | image_url: width: 360 }} 360w,{%- endif -%}
          {%- if card_product.media[1].width >= 533 -%}{{ card_product.media[1] | image_url: width: 533 }} 533w,{%- endif -%}
          {%- if card_product.media[1].width >= 720 -%}{{ card_product.media[1] | image_url: width: 720 }} 720w,{%- endif -%}
          {%- if card_product.media[1].width >= 940 -%}{{ card_product.media[1] | image_url: width: 940 }} 940w,{%- endif -%}
          {%- if card_product.media[1].width >= 1066 -%}{{ card_product.media[1] | image_url: width: 1066 }} 1066w,{%- endif -%}
          {{ card_product.media[1] | image_url }} {{ card_product.media[1].width }}w,
         sizes: (min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 130 | divided_by: 4 }}px, (min-width: 990px) calc((100vw - 130px) / 4), (min-width: 750px) calc((100vw - 120px) / 3), calc((100vw - 35px) / 2)
      "
    {%- endif -%}
  >
  </product-card>
{%- endif -%}
